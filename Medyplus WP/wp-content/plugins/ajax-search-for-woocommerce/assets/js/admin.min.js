!function($){var a={inputSel:"dgwt-wcas-options-toggle input[type=radio]",groupSel:"dgwt_wcas_settings-group",reloadChoices:function(c){var d=this,e=$('[name="'+c+'"]').closest("."+d.groupSel),a=$('[name="'+c+'"]:checked').val(),b="";d.hideAll(e),(a=a.replace("_","-")).length>0&&(b="wcas-opt-"+a),$("."+b).length>0&&$("."+b).fadeIn()},hideAll:function(a){a.find('tr[class*="wcas-opt-"]').hide()},registerListeners:function(){var a=this;$("."+a.inputSel).on("change",function(){a.reloadChoices($(this).attr("name"))})},init:function(){var a=this,b=$("."+a.inputSel+":checked");b.length>0&&(a.registerListeners(),b.each(function(){a.reloadChoices($(this).attr("name"))}))}},b={inputSel:"dgwt-wcas-options-cb-toggle input[type=checkbox]",groupSel:"dgwt_wcas_settings-group",reloadChoices:function(a){var c=a.is(":checked"),b=this.getGroupSelector(a);$("."+b+":not(.dgwt-wcas-options-cb-toggle)").hide(),c&&$("."+b).each(function(){$(this).hasClass("js-dgwt-wcas-adv-settings")&&$(".js-dgwt-wcas-adv-settings-toggle").hasClass("woocommerce-input-toggle--disabled")||$(this).fadeIn()})},getGroupSelector(a){var b=a.closest(".dgwt-wcas-options-cb-toggle"),c="",d=b.attr("class").split(/\s+/);return $.each(d,function(b,a){-1!==a.indexOf("js-dgwt-wcas-cbtgroup-")&&(c=a)}),c},registerListeners:function(){var a=this;$(document).on("change","."+a.inputSel,function(){a.reloadChoices($(this))})},refresh:function(){var b=this,a=$("."+b.inputSel);a.length>0&&a.each(function(){var c=$(this).is(":checked"),a=b.getGroupSelector($(this));c?$("."+a).fadeIn():$("."+a+":not(.dgwt-wcas-options-cb-toggle)").hide()})},init:function(){var a=this,b=$("."+a.inputSel);b.length>0&&(a.registerListeners(),b.each(function(){a.reloadChoices($(this))}))}},c={inputSel:"js-dgwt-wcas-options-toggle-sibling input[type=checkbox]",toogleSibling:function(a){a.is(":checked")?a.closest("label").next().fadeIn():a.closest("label").next().hide()},registerListeners:function(){var a=this;$(document).on("change","."+a.inputSel,function(){a.toogleSibling($(this))})},init:function(){var a=this,b=$("."+a.inputSel);b.length>0&&(a.registerListeners(),b.each(function(){a.toogleSibling($(this))}))}},d={layoutSelect:"select[id*='search_layout']",overlayMobile:"input[id*='enable_mobile_overlay']",switchLayoutBreakpoint:"input[id*='mobile_breakpoint']",mobileOverlayBreakpoint:"input[id*='mobile_overlay_breakpoint']",searchIconColor:"input[id*='search_icon_color']",$layoutSelectEl:null,$overlayMobileEl:null,$switchLayoutBreakpointEl:null,$mobileOverlayBreakpointEl:null,$searchIconColorEl:null,setConditions:function(){var b=this.$layoutSelectEl.find("option:selected").val(),c=this.$overlayMobileEl.is(":checked"),a=$(".js-dgwt-wcas-adv-settings-toggle").hasClass("woocommerce-input-toggle--enabled");switch(this.hideOption(this.$switchLayoutBreakpointEl),this.hideOption(this.$mobileOverlayBreakpointEl),this.hideOption(this.$searchIconColorEl),$("input[id*='bg_search_icon_color']").closest("tr").show(),b){case"icon":a&&this.showOption(this.$searchIconColorEl);break;case"icon-flexible":case"icon-flexible-inv":a&&(this.showOption(this.$switchLayoutBreakpointEl),this.showOption(this.$searchIconColorEl));break;default:a&&$("input[id*='bg_search_icon_color']").closest("tr").hide()}c&&this.showOption(this.$mobileOverlayBreakpointEl)},hideOption:function(a){a.closest("tr").hide()},showOption:function(a){a.closest("tr").show()},registerListeners:function(){var a=this;a.$layoutSelectEl.on("change",function(){a.setConditions()}),a.$overlayMobileEl.on("change",function(){a.setConditions()})},init:function(){var a=this,b=$(a.layoutSelect);b.length>0&&(a.$layoutSelectEl=b,a.$overlayMobileEl=$(a.overlayMobile),a.$switchLayoutBreakpointEl=$(a.switchLayoutBreakpoint),a.$mobileOverlayBreakpointEl=$(a.mobileOverlayBreakpoint),a.$searchIconColorEl=$(a.searchIconColor),a.registerListeners(),setTimeout(function(){a.setConditions()},400))}},e={actionTriggerClass:"js-ajax-build-index",actionStopTriggerClass:"js-ajax-stop-build-index",indexingWrappoerClass:"js-dgwt-wcas-indexing-wrapper",indexerTabProgressClass:"js-dgwt-wcas-indexer-tab-progress",indexerTabErrorClass:"js-dgwt-wcas-indexer-tab-error",indexerMenuErrorClass:"dgwt-wcas-menu-warning-icon",getWrapper:function(){return $("."+this.indexingWrappoerClass).closest(".dgwt-wcas-settings-info")},registerListeners:function(){var a=this;$(document).on("click","."+a.actionTriggerClass,function(d){d.preventDefault();var b=$(this);b.attr("disabled","disabled"),$(".dgwt-wcas-settings-info").addClass("wcas-ajax-build-index-wait"),$("."+a.indexerTabErrorClass).removeClass("active"),$("."+a.indexerTabProgressClass).addClass("active");var c=!!b.hasClass("js-ajax-build-index-emergency");c&&($(".dgwt-wcas-indexing-header__title").text("[Emergency mode] Wait... Indexing in progress"),$(".dgwt-wcas-indexing-header__troubleshooting, .dgwt-wcas-indexing-header__actions, .js-dgwt-wcas-indexer-details").hide()),$.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_build_index",emergency:c,_wpnonce:dgwt_wcas.nonces.build_index},success:function(b){void 0!==b&&b.success&&(a.getWrapper().html(b.data.html),a.heartbeat())},complete:function(){b.removeAttr("disabled"),$(".dgwt-wcas-settings-info").removeClass("wcas-ajax-build-index-wait"),c&&window.location.reload()}})}),$(document).on("click","."+a.actionStopTriggerClass,function(b){b.preventDefault(),$(this).attr("disabled","disabled"),a.getWrapper().attr("data-stopping","1"),$.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_stop_build_index",_wpnonce:dgwt_wcas.nonces.stop_build_index},success:function(b){void 0!==b&&b.success&&(a.getWrapper().html(b.data.html),a.heartbeat())},complete:function(){a.getWrapper().attr("data-stopping","0")}})})},heartbeat:function(){var a=this;setTimeout(function(){$.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_build_index_heartbeat",_wpnonce:dgwt_wcas.nonces.build_index_heartbeat},success:function(b){void 0!==b&&b.success&&"1"!==a.getWrapper().attr("data-stopping")&&(a.getWrapper().html(b.data.html),b.data.loop?a.heartbeat():($("."+a.indexerTabProgressClass).removeClass("active"),"error"===b.data.status?$("."+a.indexerTabErrorClass).addClass("active"):"completed"===b.data.status&&$("."+a.indexerMenuErrorClass).remove()),b.data.loop||!(b.data.refresh_once.length>0)||document.cookie.split(";").some(function(a){return 0===a.trim().indexOf("dgwt_wcas_refresh_once="+b.data.refresh_once)})||"none"!==$("#dgwt_wcas_troubleshooting-tab").css("display")||(document.cookie="dgwt_wcas_refresh_once="+b.data.refresh_once,location.reload()))}})},1e3)},detailsToggle:function(){var a;$(document).on("click",".js-dgwt-wcas-indexing-details-trigger",function(c){c.preventDefault();var b=$(".js-dgwt-wcas-indexer-details");b.hasClass("show")?(b.removeClass("show"),b.addClass("hide"),$(".js-dgwt-wcas-indexing__showd").addClass("show").removeClass("hide"),$(".js-dgwt-wcas-indexing__hided").addClass("hide").removeClass("show"),a=!1):(b.addClass("show"),b.removeClass("hide"),$(".js-dgwt-wcas-indexing__showd").addClass("hide").removeClass("show"),$(".js-dgwt-wcas-indexing__hided").addClass("show").removeClass("hide"),a=!0),$.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_index_details_toggle",display:a}})})},init:function(){this.registerListeners(),$("."+this.indexingWrappoerClass).length>0&&this.heartbeat(),this.detailsToggle()}},f={init:function(){var a=this;$(".dgwt-wcas-selectize").length>0&&$.ajax({url:ajaxurl,data:{action:"dgwt_wcas_settings_list_custom_fields",_wpnonce:$(".dgwt-wcas-selectize").data("security")},success:function(b){void 0!==b&& void 0!==b.data&&a.initSelectize(b.data)}})},initSelectize:function(b){var a=$(".dgwt-wcas-selectize");a.length>0&&a.each(function(){var c=$(this),a=c.data("options"),d=b;if(a.length>0){a=JSON.parse('["'+decodeURI(a.replace(/&/g,'","').replace(/=/g,'","'))+'"]');var e="";a.forEach(function(a,b){if((b+1)%2==0){var c={value:a,label:e};d.push(c),e=""}e=a})}$(this).selectize({persist:!1,maxItems:null,valueField:"key",labelField:"label",searchField:["value","label"],options:d,create:function(a){return{value:a.key,label:a.label}},load:function(a,b){if(!a.length)return b();$.ajax({url:ajaxurl,data:{action:"dgwt_wcas_settings_list_custom_fields",_wpnonce:c.data("security")},error:function(){b()},success:function(a){b(a.data)}})}})})}},g={init:function(){var a=$(".js-dgwt-wcas-tooltip");a.length>0&&a.each(function(){var b=$(this)[0],a=$(this).data("tooltip-html-el"),c=$(this).data("tooltip-placement");a&&new DgwtWcasTooltip(b,{title:$("."+a+" > .dgwt-wcas-tooltip-wrapper")[0],placement:c,trigger:"hover",html:!0})})}},h={advClass:"js-dgwt-wcas-adv-settings",highlightClass:"dgwt-wcas-opt-highlight",transClass:"dgwt-wcas-opt-transition",init:function(){this.clickListener(),this.setStartingState()},clickListener:function(){var a=this;$(document).on("click",".js-dgwt-wcas-settings__advanced",function(){var b;b=$(".js-dgwt-wcas-adv-settings-toggle").hasClass("woocommerce-input-toggle--disabled")?"show":"hide",a.saveChoice(b)})},setStartingState:function(){var a=$("."+this.advClass);a.length>0&&($(".js-dgwt-wcas-adv-settings-toggle").hasClass("woocommerce-input-toggle--enabled")?(a.show(),b.refresh()):a.hide())},saveChoice:function(a){$(".js-dgwt-wcas-settings__advanced").append('<span class="dgwt-wcas-adv-settings-saving">saving...</span>'),$.ajax({url:ajaxurl,data:{_wpnonce:dgwt_wcas.nonces.advanced_options_switch,action:"dgwt_wcas_adv_settings",adv_settings_value:a}}).done(function(a){$(".dgwt-wcas-adv-settings-saving").remove()});var b=$(".js-dgwt-wcas-adv-settings-toggle");"show"===a&&(b.removeClass("woocommerce-input-toggle--disabled"),b.addClass("woocommerce-input-toggle--enabled")),"hide"===a&&(b.removeClass("woocommerce-input-toggle--enabled"),b.addClass("woocommerce-input-toggle--disabled")),this.toggleAdvancedOpt(a)},toggleAdvancedOpt:function(e){var c=this,a=$("."+c.advClass);a.length>0&&(a.addClass(c.highlightClass),a.addClass(c.transClass),"show"===e&&a.fadeIn(500,function(){setTimeout(function(){a.removeClass(c.highlightClass),setTimeout(function(){a.removeClass(c.transClass),b.refresh(),d.setConditions()},500)},500)}),"hide"===e&&setTimeout(function(){a.removeClass(c.transClass),a.fadeOut(500,function(){a.removeClass(c.highlightClass)})},500))}},i={placeholderClass:"js-dgwt-wcas-stats-placeholder",placeholderClassLoaded:"js-dgwt-wcas-stats-placeholder-loaded",preloaderClass:"dgwt-wcas-stats-preloader",settingsGroupSel:"#dgwt_wcas_analytics",criticalSearchesLoadMoreClass:"js-dgwt-wcas-critical-searches-load-more",autocompleteWithResultsLoadMoreClass:"js-dgwt-wcas-autocomplete-with-results-load-more",searchPageWithResultsLoadMoreClass:"js-dgwt-wcas-search-page-with-results-load-more",checkPhraseStatusClass:"js-dgwt-wcas-stats-critical-check",checkPhraseStatusInitClass:"js-dgwt-wcas-stats-critical-check-init",rowLoadingClass:"dgwt-wcas-analytics-row-loading",languageSwitcherClass:"js-dgwt-wcas-analytics-lang",excludePhraseClass:"js-dgwt-wcas-analytics-exclude-phrase",checkIndexerAction:"js-dgwt-wcas-analytics-check-indexer",init:function(){void 0!==dgwt_wcas.analytics&&dgwt_wcas.analytics.enabled&&this.interfaceLoaderListener()},interfaceLoaderListener:function(){var b=this,a=$("."+b.languageSwitcherClass);$(document).on("dgwt_wcas_settings_group_active",function(c,a){$(a).length>0&&"dgwt_wcas_analytics"===a.id&&(b.isLoaded()||b.loadInterface())}),a.length>0&&a.on("change",function(){var a=$("."+b.placeholderClass);a.length>0&&(a.html(""),b.loadInterface())})},isLoaded:function(){return $("."+this.placeholderClassLoaded).length>0},showPreloader:function(){var a=$("."+this.placeholderClass),b='<img class="'+this.preloaderClass+'" src="'+dgwt_wcas.analytics.images.placeholder+'" />';a.length&&a.append(b)},loadInterface:function(){var a=this,b=$("."+a.languageSwitcherClass+" option:selected");a.showPreloader();var c={action:"dgwt_wcas_load_stats_interface","_wpnonce":dgwt_wcas.analytics.nonce.analytics_load_interface};b.length>0&&(c.lang=b.val()),$.post(ajaxurl,c,function(b){var c=$("."+a.placeholderClass);"object"==typeof b&&b.success&&c.length>0&&(c.addClass(a.placeholderClassLoaded),c.html(b.data.html),a.loadCheckCriticalSearchesListeners(),a.loadMoreListeners())})},loadCheckCriticalSearchesListeners:function(){var a=this,b=$("."+a.checkPhraseStatusClass+":not(."+a.checkPhraseStatusInitClass+")");b.on("click",function(b){b.preventDefault(),$(b.target).after('<img src="'+dgwt_wcas.images.admin_preloader_url+'" />'),a.checkPhraseStatus($(b.target))}),b.each(function(){$(this).addClass(a.checkPhraseStatusInitClass)})},loadMoreListeners:function(){var a=this;$("."+a.criticalSearchesLoadMoreClass).on("click",function(b){b.preventDefault(),$(this).before('<img src="'+dgwt_wcas.images.admin_preloader_url+'" />'),$(this).closest("tr").addClass(a.rowLoadingClass),a.loadMoreCriticalSearches()}),$("."+a.autocompleteWithResultsLoadMoreClass).on("click",function(b){b.preventDefault(),a.loadMorePhrases("autocomplete",$(b.target))}),$("."+a.searchPageWithResultsLoadMoreClass).on("click",function(b){b.preventDefault(),a.loadMorePhrases("search-page",$(b.target))})},checkPhraseStatus:function(c){var d=this,a=$("."+d.languageSwitcherClass+" option:selected"),b={action:"dgwt_wcas_check_critical_phrase",phrase:c.closest("tr").find("td:nth-child(2)").text(),"_wpnonce":dgwt_wcas.analytics.nonce.check_critical_phrase};a.length>0&&(b.lang=a.val()),$.post(ajaxurl,b,function(a){if("object"==typeof a&&a.success){var b=c.closest("tr");c.closest("td").html(a.data.html);var e=b.find("."+d.excludePhraseClass),f=b.find("."+d.checkIndexerAction);e.length>0&&e.on("click",function(a){a.preventDefault();var c="<p>Processing...</p>";$(a.target).closest("td").html(c),d.excludePhrase(b)}),f.length>0&&$("."+d.checkIndexerAction).on("click",function(b){b.preventDefault();var a=$("#dgwt_wcas_performance-tab");a.length>0&&(a[0].click(),$([document.documentElement,document.body]).animate({scrollTop:0},1e3))})}})},excludePhrase:function(c){var a=$("."+this.languageSwitcherClass+" option:selected"),b={action:"dgwt_wcas_exclude_critical_phrase",phrase:c.find("td:nth-child(2)").text(),"_wpnonce":dgwt_wcas.analytics.nonce.exclude_critical_phrase};a.length>0&&(b.lang=a.val()),$.post(ajaxurl,b,function(a){"object"==typeof a&&a.success&&(c.addClass("dgwt-wcas-analytics-disable-row"),c.find("td:last-child").html(a.data))})},loadMoreCriticalSearches:function(){var c=this,a=$("."+c.languageSwitcherClass+" option:selected"),b={action:"dgwt_wcas_laod_more_critical_searches",loaded:$(".js-dgwt-wcas-critical-searches-row").length,"_wpnonce":dgwt_wcas.analytics.nonce.load_more_critical_searches};a.length>0&&(b.lang=a.val()),$.post(ajaxurl,b,function(a){if("object"==typeof a&&a.success){var b=$("."+c.criticalSearchesLoadMoreClass).closest("tr");a.data.html.length>0&&b.before(a.data.html),a.data.more>0?(b.removeClass(c.rowLoadingClass),b.find("img").remove(),$("."+c.criticalSearchesLoadMoreClass+" span:first-child").text(a.data.more_label),c.loadCheckCriticalSearchesListeners()):b.remove()}})},loadMorePhrases:function(d,b){var c=$("."+this.languageSwitcherClass+" option:selected");if(b.before('<img src="'+dgwt_wcas.images.admin_preloader_url+'" />'),b.closest("tr").addClass(this.rowLoadingClass),"autocomplete"===d)var a={action:"dgwt_wcas_laod_more_autocomplete",loaded:$(".js-dgwt-wcas-autocomplete-row").length,"_wpnonce":dgwt_wcas.analytics.nonce.load_more_autocomplete};else var a={action:"dgwt_wcas_laod_more_search_page",loaded:$(".js-dgwt-wcas-search-page-row").length,"_wpnonce":dgwt_wcas.analytics.nonce.load_more_search_page};c.length>0&&(a.lang=c.val()),$.post(ajaxurl,a,function(a){"object"==typeof a&&a.success&&b.closest("tbody").html(a.data.html)})}};window.DGWT_WCAS_SEARCH_PREVIEW={previewWrapper:{},searchWrapp:{},suggestionWrapp:{},searchInput:{},animateTypingInterval:null,init:function(){var a=this;a.previewWrapper=$(".js-dgwt-wcas-preview"),a.searchWrapp=$(".js-dgwt-wcas-search-wrapp"),a.suggestionWrapp=$(".js-dgwt-wcas-suggestions-wrapp"),a.detailsWrapp=$(".js-dgwt-wcas-details-wrapp"),a.searchInput=$(".js-dgwt-wcas-search-input"),a.onChangeHandler(),a.onColorHandler(),a.onTypeHandler(),a.disableSubmit(),a.noResultsHandler(),a.fixSizesInit(),a.keepPreviewVisible(),a.animationController()},isChecked:function(a){return!!(a.length>0&&a.is(":checked"))},isColor:function(a){return"string"==typeof a&&7===a.length&&"#"===a.charAt(0)},camelCase:function(d){for(var b=d.split("_"),c="",a=0;a<b.length;a++)c+=b[a].charAt(0).toUpperCase()+b[a].slice(1);return c},disableSubmit:function(){var a,b;$(".js-dgwt-wcas-preview-source").on("click",function(c){c.preventDefault();var d=c.pageX-100,e=c.pageY+10;void 0!==a&&(clearTimeout(a),b&&b.remove()),$("body").append('<div class="dgwt-wcas-click-alert">No interaction! This is only a preview.</div>'),(b=$(".dgwt-wcas-click-alert")).css({left:d,top:e}),$(".dgwt-wcas-preview-source").addClass("dgwt-wcas-preview-source-no-click"),a=setTimeout(function(){b.fadeOut(500,function(){$(this).remove(),$(".dgwt-wcas-preview-source").removeClass("dgwt-wcas-preview-source-no-click")})},2e3)})},noResultsHandler:function(){var b=this,c=".js-dgwt-wcas-preview .dgwt-wcas-suggestion:not(.js-dgwt-wcas-suggestion-nores)",d=".js-dgwt-wcas-suggestion-nores",a="input[id*='search_no_results_text']";$(document).on("focus",a,function(){$(c).addClass("dgwt-wcas-hide"),$(d).removeClass("dgwt-wcas-hide"),b.detailsWrapp.addClass("dgwt-wcas-hide"),b.suggestionWrapp.addClass("dgwt-wcas-preview-nores")}),$(document).on("blur",a,function(){$(c).removeClass("dgwt-wcas-hide"),$(d).addClass("dgwt-wcas-hide"),b.detailsWrapp.removeClass("dgwt-wcas-hide"),b.suggestionWrapp.removeClass("dgwt-wcas-preview-nores")})},onChangeHandler:function(){for(var a=this,c=["show_submit_button","max_form_width","search_style","search_layout","show_product_image","show_product_sku","show_product_desc","show_product_price","show_matching_categories","show_categories_images","show_matching_tags","show_matching_brands","show_brands_images","show_matching_posts","show_matching_pages","show_grouped_results","suggestions_limit","show_details_box"],b=0;b<c.length;b++){var g=["search_style","search_layout"].includes(c[b])?"select":"input",h=g+"[id='dgwt_wcas_settings\\["+c[b]+"\\]']",i=g+"[id^='dgwt_wcas_settings'][data-option-trigger='"+c[b]+"']",e=$(h),f=$(i),d="onChange"+a.camelCase(c[b]);"function"==typeof a[d]&&e.length>0?(a[d](e,e.val()),$(document).on("change",h,function(){d=$(this).attr("id").replace("]","").replace("dgwt_wcas_settings[",""),d="onChange"+a.camelCase(d),"function"==typeof a[d]&&a[d]($(this),this.value)})):"function"==typeof a[d]&&f.length>0?(a[d](f,f.val()),$(document).on("change",i,function(){d=$(this).data("option-trigger"),d="onChange"+a.camelCase(d),"function"==typeof a[d]&&a[d]($(this),this.value)})):a[d]("","")}},onColorHandler:function(){for(var c=this,b=["search_icon_color","bg_input_color","text_input_color","border_input_color","bg_submit_color","text_submit_color","sug_bg_color","sug_hover_color","sug_text_color","sug_highlight_color","sug_border_color"],a=0;a<b.length;a++){var d="input[id*='"+b[a]+"']",e=$(d),f="onColor"+c.camelCase(b[a]);c[f](e,e.val()),$(document).on("change",d,function(){f=$(this).attr("id").replace("]","").replace("dgwt_wcas_settings[",""),f="onColor"+c.camelCase(f),c[f]($(this),this.value)})}},onColorChangeHandler:function(a,c){var b=a.attr("id").replace("]","").replace("dgwt_wcas_settings[","");this[b="onColor"+this.camelCase(b)](a,c)},onTypeHandler:function(){for(var c=this,b=["search_submit_text","search_placeholder","search_no_results_text","search_see_all_results_text"],a=0;a<b.length;a++){var d="input[id*='"+b[a]+"']",e=$(d),f="onType"+c.camelCase(b[a]);c[f](e,e.val()),$(document).on("input",d,function(a){f=$(a.target).attr("id").replace("]","").replace("dgwt_wcas_settings[",""),f="onType"+c.camelCase(f),c[f]($(a.target),this.value)})}},onChangeMaxFormWidth:function(b,a){a.length>0&&"0"!=a?(this.searchWrapp.css("max-width",a+"px"),this.suggestionWrapp.css("max-width",a+"px")):(this.searchWrapp.css("max-width","100%"),this.suggestionWrapp.css("max-width","100%")),this.onChangeShowDetailsBox($("input[id*='show_details_box']"))},onChangeShowSubmitButton:function(e,f){var a=this,b=$(".js-dgwt-wcas-search-submit");if(a.isChecked(e)){a.searchWrapp.addClass("dgwt-wcas-has-submit"),a.searchWrapp.removeClass("dgwt-wcas-no-submit"),b.show(),$(".dgwt-wcas-sf-wrapp > .dgwt-wcas-ico-magnifier").hide();var c=$("input[id*='bg_submit_color']"),d=$("input[id*='text_submit_color']");a.onColorBgSubmitColor(c,c.val()),a.onColorTextSubmitColor(d,d.val()),setTimeout(function(){a.positionPreloader()},10)}else a.searchWrapp.addClass("dgwt-wcas-no-submit"),a.searchWrapp.removeClass("dgwt-wcas-has-submit"),b.hide(),$(".dgwt-wcas-sf-wrapp > .dgwt-wcas-ico-magnifier").show(),a.positionPreloader()},onChangeShowProductImage:function(c,d){var b=$(".js-dgwt-wcas-si"),a=$(".js-dgwt-wcas-content-wrapp");this.isChecked(c)?(this.suggestionWrapp.addClass("dgwt-wcas-has-img"),$(".dgwt-wcas-suggestion-product > .dgwt-wcas-st").remove(),$(".dgwt-wcas-suggestion-product > .dgwt-wcas-sp").remove(),a.show(),b.show()):(this.suggestionWrapp.removeClass("dgwt-wcas-has-img"),a.each(function(){$(this).closest(".dgwt-wcas-suggestion-product").append($(this).html())}),a.hide(),b.hide())},onChangeShowProductSku:function(b,c){var a=$(".js-dgwt-wcas-sku");this.isChecked(b)?(this.suggestionWrapp.addClass("dgwt-wcas-has-sku"),a.show()):(this.suggestionWrapp.removeClass("dgwt-wcas-has-sku"),a.hide())},onChangeShowProductDesc:function(b,c){var a=$(".js-dgwt-wcas-sd");this.isChecked(b)?(this.suggestionWrapp.addClass("dgwt-wcas-has-desc"),a.show()):(this.suggestionWrapp.removeClass("dgwt-wcas-has-desc"),a.hide())},onChangeShowProductPrice:function(b,c){var a=$(".js-dgwt-wcas-sp");this.isChecked(b)?(this.suggestionWrapp.addClass("dgwt-wcas-has-price"),a.show()):(this.suggestionWrapp.removeClass("dgwt-wcas-has-price"),a.hide())},onChangeShowMatchingCategories:function(d,e){var b=$(".dgwt-wcas-suggestion-headline-cat"),a=$(".dgwt-wcas-suggestion-cat");this.isChecked(d)?(b.show(),a.show(),a.removeClass("js-dgwt-wcas-suggestion-hidden"),this.onChangeShowGroupedResults($("input[id*='show_grouped_results']"))):(b.hide(),a.hide(),a.addClass("js-dgwt-wcas-suggestion-hidden"));var c=$("input[id*='suggestions_limit']");this.onChangeSuggestionsLimit(c,c.val())},onChangeShowCategoriesImages:function(b,c){var a=$(".js-dgwt-wcas-suggestion-cat");this.isChecked(b)?a.addClass("dgwt-wcas-has-img"):a.removeClass("dgwt-wcas-has-img")},onChangeShowMatchingTags:function(d,e){var b=$(".dgwt-wcas-suggestion-headline-tag"),a=$(".dgwt-wcas-suggestion-tag");this.isChecked(d)?(b.show(),a.show(),a.removeClass("js-dgwt-wcas-suggestion-hidden"),this.onChangeShowGroupedResults($("input[id*='show_grouped_results']"))):(b.hide(),a.hide(),a.addClass("js-dgwt-wcas-suggestion-hidden"));var c=$("input[id*='suggestions_limit']");this.onChangeSuggestionsLimit(c,c.val())},onChangeShowMatchingBrands:function(d,e){var b=$(".dgwt-wcas-suggestion-headline-brand"),a=$(".dgwt-wcas-suggestion-brand");this.isChecked(d)?(b.show(),a.show(),a.removeClass("js-dgwt-wcas-suggestion-hidden"),this.onChangeShowGroupedResults($("input[id*='show_grouped_results']"))):(b.hide(),a.hide(),a.addClass("js-dgwt-wcas-suggestion-hidden"));var c=$("input[id*='suggestions_limit']");this.onChangeSuggestionsLimit(c,c.val())},onChangeShowBrandsImages:function(b,c){var a=$(".js-dgwt-wcas-suggestion-brand");this.isChecked(b)?a.addClass("dgwt-wcas-has-img"):a.removeClass("dgwt-wcas-has-img")},onChangeShowMatchingPosts:function(d,e){var b=$(".dgwt-wcas-suggestion-headline-post"),a=$(".dgwt-wcas-suggestion-post");this.isChecked(d)?(b.show(),a.show(),a.removeClass("js-dgwt-wcas-suggestion-hidden"),this.onChangeShowGroupedResults($("input[id*='show_grouped_results']"))):(b.hide(),a.hide(),a.addClass("js-dgwt-wcas-suggestion-hidden"));var c=$("input[id*='suggestions_limit']");this.onChangeSuggestionsLimit(c,c.val())},onChangeShowMatchingPages:function(d,e){var b=$(".dgwt-wcas-suggestion-headline-page"),a=$(".dgwt-wcas-suggestion-page");this.isChecked(d)?(b.show(),a.show(),a.removeClass("js-dgwt-wcas-suggestion-hidden"),this.onChangeShowGroupedResults($("input[id*='show_grouped_results']"))):(b.hide(),a.hide(),a.addClass("js-dgwt-wcas-suggestion-hidden"));var c=$("input[id*='suggestions_limit']");this.onChangeSuggestionsLimit(c,c.val())},onChangeShowGroupedResults:function(b,d){var a=$(".dgwt-wcas-st--direct-headline"),c=$(".dgwt-wcas-suggestion-headline");this.isChecked(b)?(a.addClass("dgwt-wcas-hidden"),this.suggestionWrapp.addClass("dgwt-wcas-has-headings"),$(".dgwt-wcas-suggestion-headline").show(),this.isChecked($("input[data-option-trigger='show_matching_categories']"))||$(".dgwt-wcas-suggestion-headline-cat").hide(),this.isChecked($("input[data-option-trigger='show_matching_tags']"))||$(".dgwt-wcas-suggestion-headline-tag").hide(),this.isChecked($("input[data-option-trigger='show_matching_brands']"))||$(".dgwt-wcas-suggestion-headline-brand").hide(),this.isChecked($("input[id*='show_matching_posts']"))||$(".dgwt-wcas-suggestion-headline-post").hide(),this.isChecked($("input[id*='show_matching_pages']"))||$(".dgwt-wcas-suggestion-headline-page").hide()):(a.removeClass("dgwt-wcas-hidden"),c.hide(),this.suggestionWrapp.removeClass("dgwt-wcas-has-headings"))},onChangeSuggestionsLimit:function(a,b){setTimeout(function(){var d=0,f=7,i=$(".dgwt-wcas-suggestion-duplicated"),j=["brand","cat","tag","post","page","product"];b.length>0&&"0"!=b&&(f=Math.abs(b)),i.length>0&&i.remove();var c=[];for(d=0;d<j.length;d++){var k=$(".dgwt-wcas-suggestion-"+j[d]+":not(.js-dgwt-wcas-suggestion-hidden)");k.length>0&&c.push(k)}var g=c.length;if(c.length>0)for(var l=f-c.length,e=c.length-1;l>0;){var h=c[e].clone();h.addClass("dgwt-wcas-suggestion-duplicated"),h.removeClass("dgwt-wcas-suggestion-selected"),c[e].after(h),g++,--e<0&&(e=c.length-1),l--}g>f&&a.val(g)},10)},onChangeShowDetailsBox:function(b,c){var a=this;a.isChecked(b)?(a.detailsWrapp.show(),a.searchWrapp.addClass("dgwt-wcas-is-detail-box"),a.previewWrapper.addClass("dgwt-wcas-is-details"),a.previewWrapper.addClass("dgwt-wcas-details-right"),setTimeout(function(){$(".dgwt-wcas-suggestion-product:not(.dgwt-wcas-suggestion-duplicated)").addClass("dgwt-wcas-suggestion-selected");var c=$(".js-dgwt-wcas-preview-bar-example");if(c.width()>=550){a.previewWrapper.addClass("dgwt-wcas-full-width");var b=getComputedStyle(c[0]).width;(b=Math.round(parseFloat(b.replace("px",""))))%2==0?(a.suggestionWrapp.css("width",Math.round(b/2)),a.detailsWrapp.css("width",Math.round(b/2))):(a.suggestionWrapp.css("width",Math.floor(b/2)),a.detailsWrapp.css("width",Math.ceil(b/2)))}else a.suggestionWrapp.width(a.searchWrapp.width())},10)):(a.detailsWrapp.hide(),a.searchWrapp.removeClass("dgwt-wcas-is-detail-box"),a.previewWrapper.removeClass("dgwt-wcas-is-details"),a.previewWrapper.removeClass("dgwt-wcas-details-right"),a.previewWrapper.removeClass("dgwt-wcas-full-width"),$(".dgwt-wcas-suggestion-product").removeClass("dgwt-wcas-suggestion-selected"),a.suggestionWrapp.css("width",""),a.detailsWrapp.css("width",""))},onChangeSearchStyle:function(h,a){var b,e=this,d=["solaris","pirx"],c=$('input[id*="show_submit_button"]'),f=$('label[for*="bg_submit_color"]');for($(".dgwt-wcas-ico-magnifier").addClass("dgwt-wcas-hidden"),b=0;b<d.length;b++)$(".js-dgwt-wcas-preview").removeClass("dgwt-wcas-open-"+d[b]),$(".js-dgwt-wcas-search-wrapp").removeClass("dgwt-wcas-style-"+d[b]);if($(".js-dgwt-wcas-ico-magnifier-"+a).removeClass("dgwt-wcas-hidden"),$(".js-dgwt-wcas-preview").addClass("dgwt-wcas-open-"+a),$(".js-dgwt-wcas-search-wrapp").addClass("dgwt-wcas-style-"+a),"solaris"===a&&($('label[for*="show_submit_button"] .js-dgwt-wcas-tooltip').addClass("dgwt-wcas-hidden"),$('label[for*="search_submit_text"]').closest("tr").removeClass("dgwt-wcas-hidden"),$('input[id*="search_submit_text"]').prop("disabled",!1),f.closest("tr").removeClass("dgwt-wcas-hidden"),$('label[for*="text_submit_color"] > span:nth-child(1)').removeClass("dgwt-wcas-hidden"),$('label[for*="text_submit_color"] > span:nth-child(2)').addClass("dgwt-wcas-hidden"),c.prop("disabled",!1),$(".js-dgwt-wcas-submit-button-pirx-tooltip").removeClass("dgwt-wcas-hidden"),setTimeout(function(){e.positionPreloader()},300)),"pirx"===a){$('label[for*="show_submit_button"] .js-dgwt-wcas-tooltip').removeClass("dgwt-wcas-hidden"),$('label[for*="search_submit_text"]').closest("tr").addClass("dgwt-wcas-hidden"),$('input[id*="search_submit_text"]').prop("disabled",!0),$('label[for*="bg_submit_color"]').closest("tr").addClass("dgwt-wcas-hidden"),$('label[for*="text_submit_color"] > span:nth-child(2)').removeClass("dgwt-wcas-hidden"),$('label[for*="text_submit_color"] > span:nth-child(1)').addClass("dgwt-wcas-hidden"),$('input[id*="search_submit_text"]').val("");var g=f.closest("tr").find(".wp-picker-clear");g.length>0&&g[0].click(),e.onColorBgSubmitColor(),c.is(":checked")||c[0].click(),c.prop("disabled",!0),e.onTypeSearchSubmitText($('input[id*="search_submit_text"]'),""),setTimeout(function(){e.positionPreloader()},10)}},onChangeSearchLayout:function(e,d){var b=$(".js-dgwt-wcas-preview-device-info"),c=$(".js-dgwt-wcas-preview-bar-example"),a=$(".js-dgwt-wcas-preview-icon-example");switch($(".js-dgwt-wcas-preview-device-info > span").addClass("dgwt-wcas-hidden"),a.removeClass("dgwt-wcas-preview-icon-only"),d){case"classic":b.addClass("dgwt-wcas-hidden"),c.removeClass("dgwt-wcas-hidden"),a.addClass("dgwt-wcas-hidden");break;case"icon":b.addClass("dgwt-wcas-hidden"),c.addClass("dgwt-wcas-hidden"),a.removeClass("dgwt-wcas-hidden"),$(".dgwt-wcas-search-form").removeClass("dgwt-wcas-hidden"),$(".dgwt-wcas-search-icon-arrow").removeClass("dgwt-wcas-hidden"),a.addClass("dgwt-wcas-preview-icon-only");break;case"icon-flexible":b.removeClass("dgwt-wcas-hidden"),c.removeClass("dgwt-wcas-hidden"),a.removeClass("dgwt-wcas-hidden"),a.find(".dgwt-wcas-search-form").addClass("dgwt-wcas-hidden"),a.find(".dgwt-wcas-search-icon-arrow").addClass("dgwt-wcas-hidden"),$('.js-dgwt-wcas-preview-device-info[data-device="desktop"] span:nth-child(2)').removeClass("dgwt-wcas-hidden"),$('.js-dgwt-wcas-preview-device-info[data-device="mobile"] span:nth-child(1)').removeClass("dgwt-wcas-hidden");break;case"icon-flexible-inv":b.removeClass("dgwt-wcas-hidden"),c.removeClass("dgwt-wcas-hidden"),a.removeClass("dgwt-wcas-hidden"),a.find(".dgwt-wcas-search-form").addClass("dgwt-wcas-hidden"),a.find(".dgwt-wcas-search-icon-arrow").addClass("dgwt-wcas-hidden"),$('.js-dgwt-wcas-preview-device-info[data-device="desktop"] span:nth-child(1)').removeClass("dgwt-wcas-hidden"),$('.js-dgwt-wcas-preview-device-info[data-device="mobile"] span:nth-child(2)').removeClass("dgwt-wcas-hidden")}},onColorSearchIconColor:function(b,a){this.isColor(a)?this.searchWrapp.find(".dgwt-wcas-ico-magnifier-handler path").css("fill",a):this.searchWrapp.find(".dgwt-wcas-ico-magnifier-handler path").css("fill","")},onColorBgInputColor:function(b,a){this.isColor(a)?this.searchInput.css("background-color",a):this.searchInput.css("background-color","")},onColorTextInputColor:function(e,a){var c="dgwt-wcas-preview-placeholder-style";if(this.isColor(a)){var b='<style class="'+c+'">';b+=".dgwt-wcas-search-input {color:"+a+"!important;}",b+=".dgwt-wcas-ico-magnifier path {fill:"+a+"}",b+="</style>",$("head").append(b),this.searchInput.css("color",a)}else{this.searchInput.css("color","");var d=$("."+c);d.length>0&&d.remove()}},onColorBorderInputColor:function(b,a){this.isColor(a)?this.searchInput.css("border-color",a):this.searchInput.css("border-color","")},onColorBgSubmitColor:function(e,b){var c="dgwt-wcas-preview-submit-style";if(this.isChecked($("input[id*='show_submit_button']"))&&this.isColor(b)){var a='<style class="'+c+'">';a+=".dgwt-wcas-search-submit::before{border-color: transparent "+b+"!important;}",a+=".dgwt-wcas-search-submit:hover::before{border-right-color: "+b+"!important;}",a+=".dgwt-wcas-search-submit:focus::before{border-right-color: "+b+"!important;}",a+=".dgwt-wcas-search-submit{background-color: "+b+"!important;}",a+=".dgwt-wcas-om-bar .dgwt-wcas-om-return{background-color: "+b+"!important;}",a+="</style>",$("head").append(a)}else{var d=$("."+c);d.length>0&&d.remove()}},onColorTextSubmitColor:function(b,a){this.isChecked($("input[id*='show_submit_button']"))&&this.isColor(a)?($(".js-dgwt-wcas-search-submit").css("color",a),$(".dgwt-wcas-search-submit .dgwt-wcas-ico-magnifier path").css("fill",a)):(this.searchInput.css("background-color",""),$(".js-dgwt-wcas-search-submit").css("color",""),$(".dgwt-wcas-search-submit .dgwt-wcas-ico-magnifier path").css("fill",""))},onColorSugBgColor:function(e,b){var c="dgwt-wcas-preview-sugbgcol-style";if(this.isColor(b)){var a='<style class="'+c+'">';a+=".dgwt-wcas-suggestions-wrapp,",a+=".dgwt-wcas-details-wrapp",a+="{background-color: "+b+"!important;}",a+="</style>",$("head").append(a)}else{var d=$("."+c);d.length>0&&d.remove()}},onColorSugHoverColor:function(b,a){this.isColor(a)?setTimeout(function(){$(".dgwt-wcas-suggestion-selected").css("background-color",a)},50):$(".dgwt-wcas-suggestion-selected").css("background-color","")},onColorSugTextColor:function(e,b){var c="dgwt-wcas-preview-sugtextcol-style";if(this.isColor(b)){var a='<style class="'+c+'">';a+=".dgwt-wcas-suggestions-wrapp *,",a+=".dgwt-wcas-details-wrapp *,",a+=".dgwt-wcas-sd,",a+=".dgwt-wcas-suggestion *",a+="{color: "+b+"!important;}",a+="</style>",$("head").append(a)}else{var d=$("."+c);d.length>0&&d.remove()}},onColorSugHighlightColor:function(e,b){var c="dgwt-wcas-preview-sughighlight-style";if(this.isColor(b)){var a='<style class="'+c+'">';a+=".dgwt-wcas-st strong,",a+=".dgwt-wcas-sd strong",a+="{color: "+b+"!important;}",a+="</style>",$("head").append(a)}else{var d=$("."+c);d.length>0&&d.remove()}},onColorSugBorderColor:function(e,b){var c="dgwt-wcas-preview-sugborder-style";if(this.isColor(b)){var a='<style class="'+c+'">';a+=".dgwt-wcas-suggestions-wrapp,",a+=".dgwt-wcas-details-wrapp,",a+=".dgwt-wcas-suggestion,",a+=".dgwt-wcas-datails-title,",a+=".dgwt-wcas-details-more-products",a+="{border-color: "+b+"!important;}",a+="</style>",$("head").append(a)}else{var d=$("."+c);d.length>0&&d.remove()}},onTypeSearchSubmitText:function(d,b){var a=$(".js-dgwt-wcas-search-submit-l"),c=$(".js-dgwt-wcas-search-submit-m");b.length>0?(a.text(b),a.show(),c.hide()):(a.text(""),a.hide(),c.show()),this.positionPreloader()},onTypeSearchPlaceholder:function(b,a){0==a.length&&(a=dgwt_wcas.labels.search_placeholder),this.searchInput.attr("placeholder",a)},onTypeSearchNoResultsText:function(b,a){0==a.length&&(a=dgwt_wcas.labels.no_results),$(".js-dgwt-wcas-suggestion-nores span").text(a)},onTypeSearchSeeAllResultsText:function(b,a){0==a.length&&(a=dgwt_wcas.labels.show_more),$(".js-dgwt-wcas-st-more-label").text(a)},positionPreloader:function(){var b=$(".js-dgwt-wcas-search-wrapp:not(.dgwt-wcas-hidden) .js-dgwt-wcas-search-submit"),d=b.is(":visible"),c=$("select[id*='search_style'] option:selected").val(),a=b.width()+35;"pirx"==c&&(a=38),d||"solaris"!=c||(a=7),$(".dgwt-wcas-preloader").css("right",a+"px")},fixSizesInit:function(){var a=this;$(document).on("click","#dgwt_wcas_autocomplete-tab",function(){a.onChangeShowDetailsBox($("input[id*='show_details_box']"))})},keepPreviewVisible:function(){var a=$(".js-dgwt-wcas-preview-inner"),b=$(".js-dgwt-wcas-preview"),c=$(".js-dgwt-wcas-preview-source"),d=$(".dgwt-eq-settings-form");$(window).on("scroll.autocomplete",function(){var f=$(document).scrollTop(),e=b[0].getBoundingClientRect().top-40;if(e<0){var g=-1*e<1?0:-1*e;if(c.offset().top+c.outerHeight(!1)<=Math.floor(d.offset().top+d.outerHeight(!1))-90)a.css("top",g+"px");else if(f+40<a.offset().top){var h=a.css("top").replace(/px/i,"")-10;a.css("top",h+"px")}}else a.css("top",0)})},animationController:function(){var a=this;$(window).on("load",function(){var b=$("#dgwt_wcas_form_body-tab");b.length&&b.hasClass("nav-tab-active")&&a.startAnimateTyping()}),$(".dgwt_wcas_settings-nav-tab-wrapper > a").on("click",function(){"dgwt_wcas_form_body-tab"===$(this).attr("id")?(a.stopAnimateTyping(),a.startAnimateTyping()):a.stopAnimateTyping()}),$(".dgwt_wcas_settings-nav-tab-wrapper > a").on("click",function(){"dgwt_wcas_form_body-tab"===$(this).attr("id")?(a.stopAnimateTyping(),a.startAnimateTyping()):a.stopAnimateTyping()}),$('input[id*="search_placeholder"]').on("focus",function(){a.stopAnimateTyping(),_this.searchInput.val("")}),$('input[id*="search_placeholder"]').on("blur",function(){a.startAnimateTyping()})},startAnimateTyping:function(){var a=this,b=0,c=$(".js-dgwt-wcas-search-wrapp"),d=$(".js-dgwt-wcas-search-input"),e=$(".dgwt-wcas-preloader"),f=$(".js-dgwt-wcas-preview-elements-close").html();a.animateTypingInterval=setInterval(function(){10== ++b&&(d.val("f"),c.addClass("dgwt-wcas-search-filled"),c.addClass("dgwt-wcas-search-focused"),e.addClass("dgwt-wcas-close")),11===b&&d.val("fi"),12===b&&(d.val("fib"),e.append(f),a.positionPreloader()),13===b&&d.val("fibo"),14===b&&d.val("fibo "),15===b&&d.val("fibo s"),16===b&&d.val("fibo se"),17===b&&d.val("fibo sea"),18===b&&d.val("fibo sear"),19===b&&d.val("fibo searc"),20===b&&d.val("fibo search"),30===b&&d.val("fibo searc"),31===b&&d.val("fibo sear"),32===b&&d.val("fibo sea"),33===b&&d.val("fibo se"),34===b&&d.val("fibo s"),35===b&&d.val("fibo "),36===b&&d.val("fibo"),37===b&&d.val("fib"),38===b&&(d.val("fi"),e.removeClass("dgwt-wcas-close")),39===b&&d.val("f"),40===b&&(d.val(""),e.html(""),c.removeClass("dgwt-wcas-search-filled")),45===b&&(b=0)},200)},stopAnimateTyping(){var b=$(".js-dgwt-wcas-search-wrapp"),c=$(".js-dgwt-wcas-search-input"),a=$(".dgwt-wcas-preloader");a.removeClass("dgwt-wcas-close"),c.val(""),a.html(""),b.removeClass("dgwt-wcas-search-filled"),clearInterval(this.animateTypingInterval)}};var j={settingsTab:"#dgwt_wcas_troubleshooting-tab",noIssuesClass:".js-dgwt-wcas-troubleshooting-no-issues",counterClass:".js-dgwt-wcas-troubleshooting-count",issuesListClass:".js-dgwt-wcas-troubleshooting-issues",progressBar:".dgwt-wcas-troubleshooting-wrapper .progress_bar",progressBarInner:".dgwt-wcas-troubleshooting-wrapper .progress-bar-inner",resetButtonName:"dgwt-wcas-reset-async-tests",fixOutofstockButtonName:"dgwt-wcas-fix-out-of-stock-relationships",maintenanceAnalyticsButtonName:"dgwt-wcas-maintenance-analytics",switchAlternativeEndpoint:"dgwt-wcas-switch-alternative-endpoint",dismissElementorTemplateButtonName:"dgwt-wcas-dismiss-elementor-template",init:function(){var a=this;if(void 0===dgwt_wcas.troubleshooting)return;let b=dgwt_wcas.troubleshooting.tests.issues.critical+dgwt_wcas.troubleshooting.tests.issues.recommended;b>0&&($(a.counterClass).text(b).addClass("active"),$(a.settingsTab).addClass("enabled")),dgwt_wcas.troubleshooting.tests.results_async.length>0&&$.each(dgwt_wcas.troubleshooting.tests.results_async,function(){a.appendIssue(this,!1)}),dgwt_wcas.troubleshooting.tests.direct.length>0&&$.each(dgwt_wcas.troubleshooting.tests.direct,function(){a.appendIssue(this,!1)}),dgwt_wcas.troubleshooting.tests.async.length>0&&a.maybeRunNextAsyncTest(),$(document).on("click",'input[name="'+a.resetButtonName+'"]',function(c){$('input[name="'+a.resetButtonName+'"]').attr("disabled","disabled");var b={action:"dgwt_wcas_troubleshooting_reset_async_tests","_wpnonce":dgwt_wcas.troubleshooting.nonce.troubleshooting_reset_async_tests};return $.post(ajaxurl,b,function(){location.reload()}),!1}),$(document).on("click",'input[name="'+a.fixOutofstockButtonName+'"]',function(c){$('input[name="'+a.fixOutofstockButtonName+'"]').attr("disabled","disabled").next().addClass("loading");var b={action:"dgwt_wcas_troubleshooting_fix_outofstock","_wpnonce":dgwt_wcas.troubleshooting.nonce.troubleshooting_fix_outofstock};return $.post(ajaxurl,b,function(){location.reload()}),!1}),$(document).on("click",'input[name="'+a.maintenanceAnalyticsButtonName+'"]',function(c){$('input[name="'+a.maintenanceAnalyticsButtonName+'"]').attr("disabled","disabled").next().addClass("loading");var b={action:"dgwt_wcas_troubleshooting_maintenance_analytics","_wpnonce":dgwt_wcas.troubleshooting.nonce.troubleshooting_maintenance_analytics};return $.post(ajaxurl,b,function(){location.reload()}),!1}),$(document).on("click",'input[name="'+a.switchAlternativeEndpoint+'"]',function(d){var b=1===parseInt($(this).data("switch"))?"enable":"disable";$('input[name="'+a.switchAlternativeEndpoint+'"]').attr("disabled","disabled").next().addClass("loading");var c={action:"dgwt_wcas_troubleshooting_switch_alternative_endpoint","_wpnonce":dgwt_wcas.troubleshooting.nonce.troubleshooting_switch_alternative_endpoint,switch:b};return $.post(ajaxurl,c,function(){location.reload()}),!1}),$(document).on("click",'input[name="'+a.dismissElementorTemplateButtonName+'"]',function(c){$('input[name="'+a.dismissElementorTemplateButtonName+'"]').attr("disabled","disabled");var b={action:"dgwt_wcas_troubleshooting_dismiss_elementor_template","_wpnonce":dgwt_wcas.troubleshooting.nonce.troubleshooting_dismiss_elementor_template};return $.post(ajaxurl,b,function(){location.reload()}),!1})},appendIssue:function(a,c){var b,d=wp.template("dgwt-wcas-troubleshooting-issue"),e=$(this.issuesListClass+"-"+a.status);"good"!==a.status&&($(this.noIssuesClass).hide(),c&&dgwt_wcas.troubleshooting.tests.issues[a.status]++,(b=dgwt_wcas.troubleshooting.tests.issues.critical+dgwt_wcas.troubleshooting.tests.issues.recommended)>0&&($(this.counterClass).text(b).addClass("active"),$(this.settingsTab).addClass("enabled")),$(e).append(d(a)))},maybeRunNextAsyncTest:function(){var a=this;dgwt_wcas.troubleshooting.tests.async.length>0&&$.each(dgwt_wcas.troubleshooting.tests.async,function(){var b={action:"dgwt_wcas_troubleshooting_test",test:this.test,"_wpnonce":dgwt_wcas.troubleshooting.nonce.troubleshooting_async_test};return!!this.completed||(this.completed=!0,$(a.progressBar).show(),$.post(ajaxurl,b,function(b){b.success&&a.appendIssue(b.data,!0),a.maybeRunNextAsyncTest()}),!1)}),a.recalculateProgression()},recalculateProgression:function(){var b=this,c=dgwt_wcas.troubleshooting.tests.async.length,d=0;$.each(dgwt_wcas.troubleshooting.tests.async,function(){this.completed&&d++});var a=Math.ceil(d/c*100);$(b.progressBarInner).css("width",a+"%"),100===a&&setTimeout(function(){$(b.progressBar).slideUp()},2e3)}},k={moveOptionClass:".js-dgwt-wcas-move-option",init:function(){var a=$(this.moveOptionClass);a.length>0&&$.each(a,function(c,a){var b=$("#"+$(a).data("move-dest").replace(/(:|\.|\[|\])/g,"\\$1"));b.length>0&&($(a).closest("tr").hasClass("dgwt-wcas-premium-only")&&$(a).addClass("dgwt-wcas-premium-only"),$(a).clone().appendTo(b.closest("td fieldset"))),$(a).closest("tr").remove()})}},l={init:function(){"undefined"!=typeof Vue&&(Vue.component("dgwt-wcas-rule",{template:"#dgwt-wcas-settings-filters-rules-rule",components:{Selectize},props:["nonce","rule","rules","index"],data:()=>({isSelectActive:!0}),computed:{ruleValue(a){return this.rule.group}},watch:{rule:{handler:function(){this.$emit("update:rule",this.index)},deep:!0},ruleValue(){var a=this;this.$emit("change:group",this.index),this.isSelectActive=!1,setTimeout(function(){a.isSelectActive=!0},0)}},methods:{deleteRule(){this.$emit("delete:rule",this.index)},getSelectizeSettings(a){var b=void 0===dgwt_wcas_filters_rules_selected_options[a]?[]:dgwt_wcas_filters_rules_selected_options[a];return function({nonce:b,options:a,type:c}){return{persist:!1,maxItems:null,valueField:"key",labelField:"label",searchField:["label"],options:a,preload:!0,create:function(a){return{value:a.key,label:a.label}},load:function(a,d){$.ajax({url:ajaxurl,method:"POST",data:{action:"dgwt_wcas_settings_search_terms",query:a,type:c,_wpnonce:b},error:function(){d()},success:function(a){d(a.data)}})}}}({nonce:this.nonce,type:a,options:b})}}}),new Vue({el:"#dgwt-wcas-settings-filters-rules",components:{Selectize},data:()=>({rules:[]}),mounted(){try{let a=JSON.parse(this.$refs["dgwt-wcas-settings-filters-rules-ref"].value);$.each(a,function(b,c){a[b].key=Math.random()}),this.rules=a}catch(b){}this.updateInput()},methods:{addRule(){this.rules.push({group:"",values:[],key:Math.random()}),this.updateInput()},changeGroup(a){this.rules[a].values=[],this.updateInput()},deleteRule(a){this.rules=this.rules.filter(function(c,b){return b!==a}),this.updateInput()},updateInput(){let a=JSON.parse(JSON.stringify(this.rules));this.$refs["dgwt-wcas-settings-filters-rules-ref"].value=JSON.stringify(a.map(function(a){return a.key,delete a.key,a}))}}}))}};$(document).ready(function(){var m,n;(m=$(".js-dgwt-wcas-settings-margin-nob")).length>0&&m.each(function(){var b=$(this).find("td .dgwt-wcas-fieldset");if(b.length>0){var c=$(this).prev(".js-dgwt-wcas-settings-margin");if(c.length>0){var e=$(this).attr("class").split(/\s+/),d="";$.each(e,function(b,a){-1!==a.indexOf("js-dgwt-wcas-cbtgroup-")&&(d=a)});var a=b.clone(!0,!0);a.addClass("dgwt-wcas-settings-margin-nob"),d&&a.addClass(d),a.appendTo(c.find("td")),$(this).remove()}}}),a.init(),b.init(),d.init(),(n=$(".js-dgwt-wcas-sgs-autocolspan")).length>0&&n.find("td").attr("colspan",2),e.init(),f.init(),g.init(),h.init(),j.init(),k.init(),c.init(),i.init(),l.init(),window.DGWT_WCAS_SEARCH_PREVIEW.init()})}(jQuery)
